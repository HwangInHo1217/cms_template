<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>진단 문항 관리 - 교육 관리 시스템</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .sidebar {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .sidebar .nav-link {
            color: rgba(255,255,255,0.8);
            padding: 0.75rem 1rem;
            margin: 0.25rem 0;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }
        .sidebar .nav-link:hover, .sidebar .nav-link.active {
            color: white;
            background-color: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }
        .main-content {
            background-color: #f8f9fa;
            min-height: 100vh;
        }
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            margin-bottom: 20px;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 25px;
            padding: 0.5rem 1.5rem;
        }
        .table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }
        .question-card {
            border-left: 4px solid #3498db;
            margin-bottom: 15px;
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .question-options {
            margin-top: 10px;
            padding-left: 20px;
        }
        .option-item {
            padding: 8px 12px;
            margin-bottom: 8px;
            background-color: #f8f9fa;
            border-radius: 5px;
            border-left: 3px solid #ddd;
        }
        .option-item.correct {
            border-left-color: #28a745;
        }
        .filter-card {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .badge-competency {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: normal;
        }
        .badge-communication { background-color: #3498db; color: white; }
        .badge-creativity { background-color: #9b59b6; color: white; }
        .badge-leadership { background-color: #e74c3c; color: white; }
        .badge-problem-solving { background-color: #f39c12; color: white; }
        .badge-teamwork { background-color: #27ae60; color: white; }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- 사이드바 -->
            <nav class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <div class="text-center mb-4">
                        <h4 class="text-white">
                            <i class="fas fa-graduation-cap me-2"></i>
                            관리자
                        </h4>
                    </div>
                    
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="admin-index.html">
                                <i class="fas fa-tachometer-alt me-2"></i>
                                대시보드
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#userManagement">
                                <i class="fas fa-users me-2"></i>
                                사용자/조직 관리
                                <i class="fas fa-chevron-down ms-auto"></i>
                            </a>
                            <div class="collapse" id="userManagement">
                                <ul class="nav flex-column ms-3">
                                    <li class="nav-item">
                                        <a class="nav-link" href="admin-student-management.html">
                                            <i class="fas fa-user-graduate me-2"></i>
                                            학생 관리
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="admin-faculty-management.html">
                                            <i class="fas fa-chalkboard-teacher me-2"></i>
                                            교직원 관리
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="admin-department-management.html">
                                            <i class="fas fa-building me-2"></i>
                                            학과/부서 관리
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="admin-permission-management.html">
                                            <i class="fas fa-key me-2"></i>
                                            권한 관리
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="admin-diagnosis-management.html">
                                <i class="fas fa-chart-line me-2"></i>
                                역량진단 관리
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="admin-program-management.html">
                                <i class="fas fa-calendar-alt me-2"></i>
                                비교과 프로그램 관리
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="admin-counseling-management.html">
                                <i class="fas fa-comments me-2"></i>
                                상담 관리
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="admin-mileage-management.html">
                                <i class="fas fa-coins me-2"></i>
                                마일리지 관리
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="admin-notice-management.html">
                                <i class="fas fa-bullhorn me-2"></i>
                                공지사항 관리
                            </a>
                        </li>
                    </ul>

                    <hr class="my-3" style="border-color: rgba(255,255,255,0.3);">
                    
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="login.html">
                                <i class="fas fa-sign-out-alt me-2"></i>
                                로그아웃
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- 메인 콘텐츠 -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">
                        <i class="fas fa-question-circle me-2"></i>
                        진단 문항 관리
                    </h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addQuestionModal">
                                <i class="fas fa-plus me-2"></i>
                                문항 추가
                            </button>
                            <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#importQuestionsModal">
                                <i class="fas fa-file-import me-2"></i>
                                일괄 등록
                            </button>
                            <a href="admin-diagnosis-management.html" class="btn btn-outline-secondary">
                                <i class="fas fa-arrow-left me-2"></i>
                                돌아가기
                            </a>
                        </div>
                    </div>
                </div>

                <!-- 필터 및 검색 -->
                <div class="filter-card">
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <label for="competencyFilter" class="form-label">역량 영역</label>
                            <select class="form-select" id="competencyFilter">
                                <option value="">전체</option>
                                <option value="communication">의사소통역량</option>
                                <option value="creativity">창의역량</option>
                                <option value="leadership">리더십역량</option>
                                <option value="problem-solving">문제해결역량</option>
                                <option value="teamwork">팀워크역량</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="subCompetencyFilter" class="form-label">하위 역량</label>
                            <select class="form-select" id="subCompetencyFilter">
                                <option value="">전체</option>
                                <option value="sub1">언어적 표현력</option>
                                <option value="sub2">경청 능력</option>
                                <option value="sub3">비언어적 소통</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="difficultyFilter" class="form-label">난이도</label>
                            <select class="form-select" id="difficultyFilter">
                                <option value="">전체</option>
                                <option value="easy">쉬움</option>
                                <option value="medium">보통</option>
                                <option value="hard">어려움</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="statusFilter" class="form-label">상태</label>
                            <select class="form-select" id="statusFilter">
                                <option value="">전체</option>
                                <option value="active">활성</option>
                                <option value="inactive">비활성</option>
                                <option value="draft">초안</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-9 mb-3">
                            <label for="searchQuestion" class="form-label">검색</label>
                            <input type="text" class="form-control" id="searchQuestion" placeholder="문항 내용, 키워드 검색">
                        </div>
                        <div class="col-md-3 mb-3 d-flex align-items-end">
                            <button class="btn btn-primary w-100" onclick="searchQuestions()">
                                <i class="fas fa-search me-2"></i>
                                검색
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 문항 목록 -->
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="fas fa-list me-2"></i>
                            진단 문항 목록
                        </h5>
                        <span class="badge bg-primary">총 45개 문항</span>
                    </div>
                    <div class="card-body">
                        <!-- 문항 1 -->
                        <div class="question-card">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <div>
                                    <span class="badge badge-competency badge-communication me-2">의사소통역량</span>
                                    <span class="badge bg-secondary me-2">언어적 표현력</span>
                                    <span class="badge bg-info">보통</span>
                                </div>
                                <div>
                                    <button class="btn btn-sm btn-outline-primary me-1" onclick="editQuestion(1)">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteQuestion(1)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <h6 class="mb-2">Q1. 나는 내 생각과 의견을 명확하게 표현할 수 있다.</h6>
                            <div class="question-options">
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" id="q1_1" disabled>
                                        <label class="form-check-label" for="q1_1">
                                            전혀 그렇지 않다 (1점)
                                        </label>
                                    </div>
                                </div>
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" id="q1_2" disabled>
                                        <label class="form-check-label" for="q1_2">
                                            그렇지 않다 (2점)
                                        </label>
                                    </div>
                                </div>
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" id="q1_3" disabled>
                                        <label class="form-check-label" for="q1_3">
                                            보통이다 (3점)
                                        </label>
                                    </div>
                                </div>
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" id="q1_4" disabled>
                                        <label class="form-check-label" for="q1_4">
                                            그렇다 (4점)
                                        </label>
                                    </div>
                                </div>
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q1" id="q1_5" disabled>
                                        <label class="form-check-label" for="q1_5">
                                            매우 그렇다 (5점)
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-2 text-muted small">
                                <span class="me-3">문항 ID: COMM001-Q01</span>
                                <span class="me-3">최종 수정일: 2023-05-15</span>
                                <span class="badge bg-success">활성</span>
                            </div>
                        </div>

                        <!-- 문항 2 -->
                        <div class="question-card">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <div>
                                    <span class="badge badge-competency badge-communication me-2">의사소통역량</span>
                                    <span class="badge bg-secondary me-2">경청 능력</span>
                                    <span class="badge bg-info">보통</span>
                                </div>
                                <div>
                                    <button class="btn btn-sm btn-outline-primary me-1" onclick="editQuestion(2)">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteQuestion(2)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <h6 class="mb-2">Q2. 나는 다른 사람의 의견을 주의 깊게 듣고 이해하려고 노력한다.</h6>
                            <div class="question-options">
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" id="q2_1" disabled>
                                        <label class="form-check-label" for="q2_1">
                                            전혀 그렇지 않다 (1점)
                                        </label>
                                    </div>
                                </div>
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" id="q2_2" disabled>
                                        <label class="form-check-label" for="q2_2">
                                            그렇지 않다 (2점)
                                        </label>
                                    </div>
                                </div>
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" id="q2_3" disabled>
                                        <label class="form-check-label" for="q2_3">
                                            보통이다 (3점)
                                        </label>
                                    </div>
                                </div>
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" id="q2_4" disabled>
                                        <label class="form-check-label" for="q2_4">
                                            그렇다 (4점)
                                        </label>
                                    </div>
                                </div>
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q2" id="q2_5" disabled>
                                        <label class="form-check-label" for="q2_5">
                                            매우 그렇다 (5점)
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-2 text-muted small">
                                <span class="me-3">문항 ID: COMM001-Q02</span>
                                <span class="me-3">최종 수정일: 2023-05-15</span>
                                <span class="badge bg-success">활성</span>
                            </div>
                        </div>

                        <!-- 문항 3 -->
                        <div class="question-card">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <div>
                                    <span class="badge badge-competency badge-creativity me-2">창의역량</span>
                                    <span class="badge bg-secondary me-2">발산적 사고</span>
                                    <span class="badge bg-warning">어려움</span>
                                </div>
                                <div>
                                    <button class="btn btn-sm btn-outline-primary me-1" onclick="editQuestion(3)">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger" onclick="deleteQuestion(3)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <h6 class="mb-2">Q3. 주어진 문제에 대해 다양한 해결책을 생각해낼 수 있다.</h6>
                            <div class="question-options">
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" id="q3_1" disabled>
                                        <label class="form-check-label" for="q3_1">
                                            전혀 그렇지 않다 (1점)
                                        </label>
                                    </div>
                                </div>
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" id="q3_2" disabled>
                                        <label class="form-check-label" for="q3_2">
                                            그렇지 않다 (2점)
                                        </label>
                                    </div>
                                </div>
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" id="q3_3" disabled>
                                        <label class="form-check-label" for="q3_3">
                                            보통이다 (3점)
                                        </label>
                                    </div>
                                </div>
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" id="q3_4" disabled>
                                        <label class="form-check-label" for="q3_4">
                                            그렇다 (4점)
                                        </label>
                                    </div>
                                </div>
                                <div class="option-item">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="q3" id="q3_5" disabled>
                                        <label class="form-check-label" for="q3_5">
                                            매우 그렇다 (5점)
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-2 text-muted small">
                                <span class="me-3">문항 ID: CREA001-Q01</span>
                                <span class="me-3">최종 수정일: 2023-05-16</span>
                                <span class="badge bg-success">활성</span>
                            </div>
                        </div>

                        <!-- 페이지네이션 -->
                        <nav class="mt-4">
                            <ul class="pagination justify-content-center">
                                <li class="page-item disabled">
                                    <a class="page-link" href="#" tabindex="-1">이전</a>
                                </li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item">
                                    <a class="page-link" href="#">다음</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- 문항 추가 모달 -->
    <div class="modal fade" id="addQuestionModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-plus me-2"></i>
                        진단 문항 추가
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addQuestionForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="competency" class="form-label">역량 영역 *</label>
                                <select class="form-select" id="competency" required>
                                    <option value="">선택하세요</option>
                                    <option value="communication">의사소통역량</option>
                                    <option value="creativity">창의역량</option>
                                    <option value="leadership">리더십역량</option>
                                    <option value="problem-solving">문제해결역량</option>
                                    <option value="teamwork">팀워크역량</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="subCompetency" class="form-label">하위 역량 *</label>
                                <select class="form-select" id="subCompetency" required>
                                    <option value="">선택하세요</option>
                                    <option value="sub1">언어적 표현력</option>
                                    <option value="sub2">경청 능력</option>
                                    <option value="sub3">비언어적 소통</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="questionText" class="form-label">문항 내용 *</label>
                            <textarea class="form-control" id="questionText" rows="3" required></textarea>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="questionType" class="form-label">문항 유형 *</label>
                                <select class="form-select" id="questionType" required>
                                    <option value="likert5">5점 리커트 척도</option>
                                    <option value="likert7">7점 리커트 척도</option>
                                    <option value="multiple">객관식 (단일 선택)</option>
                                    <option value="checkbox">객관식 (다중 선택)</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="difficulty" class="form-label">난이도</label>
                                <select class="form-select" id="difficulty">
                                    <option value="easy">쉬움</option>
                                    <option value="medium" selected>보통</option>
                                    <option value="hard">어려움</option>
                                </select>
                            </div>
                        </div>
                        
                        <div id="optionsContainer">
                            <label class="form-label">선택지 *</label>
                            <div class="option-input mb-2">
                                <div class="input-group">
                                    <span class="input-group-text">1</span>
                                    <input type="text" class="form-control" placeholder="전혀 그렇지 않다" required>
                                    <span class="input-group-text">점수</span>
                                    <input type="number" class="form-control" value="1" min="0" max="5" required style="width: 70px;">
                                </div>
                            </div>
                            <div class="option-input mb-2">
                                <div class="input-group">
                                    <span class="input-group-text">2</span>
                                    <input type="text" class="form-control" placeholder="그렇지 않다" required>
                                    <span class="input-group-text">점수</span>
                                    <input type="number" class="form-control" value="2" min="0" max="5" required style="width: 70px;">
                                </div>
                            </div>
                            <div class="option-input mb-2">
                                <div class="input-group">
                                    <span class="input-group-text">3</span>
                                    <input type="text" class="form-control" placeholder="보통이다" required>
                                    <span class="input-group-text">점수</span>
                                    <input type="number" class="form-control" value="3" min="0" max="5" required style="width: 70px;">
                                </div>
                            </div>
                            <div class="option-input mb-2">
                                <div class="input-group">
                                    <span class="input-group-text">4</span>
                                    <input type="text" class="form-control" placeholder="그렇다" required>
                                    <span class="input-group-text">점수</span>
                                    <input type="number" class="form-control" value="4" min="0" max="5" required style="width: 70px;">
                                </div>
                            </div>
                            <div class="option-input mb-2">
                                <div class="input-group">
                                    <span class="input-group-text">5</span>
                                    <input type="text" class="form-control" placeholder="매우 그렇다" required>
                                    <span class="input-group-text">점수</span>
                                    <input type="number" class="form-control" value="5" min="0" max="5" required style="width: 70px;">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-3">
                            <div class="col-md-6">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="isActive" checked>
                                    <label class="form-check-label" for="isActive">활성화</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="isRequired" checked>
                                    <label class="form-check-label" for="isRequired">필수 문항</label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                    <button type="button" class="btn btn-primary" onclick="saveQuestion()">
                        <i class="fas fa-save me-2"></i>
                        저장
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 일괄 등록 모달 -->
    <div class="modal fade" id="importQuestionsModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-file-import me-2"></i>
                        문항 일괄 등록
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="importFile" class="form-label">엑셀 파일 업로드</label>
                        <input class="form-control" type="file" id="importFile" accept=".xlsx, .xls, .csv">
                        <div class="form-text">
                            지정된 양식의 엑셀 파일을 업로드하세요. 
                            <a href="#" class="text-primary">양식 다운로드</a>
                        </div>
                    </div>
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        일괄 등록 시 주의사항:
                        <ul class="mb-0 mt-2">
                            <li>지정된 양식을 반드시 준수해주세요.</li>
                            <li>역량 코드와 하위 역량 코드는 시스템에 등록된 값이어야 합니다.</li>
                            <li>중복된 문항 코드가 있을 경우 기존 문항이 덮어쓰기 됩니다.</li>
                        </ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                    <button type="button" class="btn btn-primary" onclick="importQuestions()">
                        <i class="fas fa-upload me-2"></i>
                        업로드
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 문항 검색
        function searchQuestions() {
            const competency = document.getElementById('competencyFilter').value;
            const subCompetency = document.getElementById('subCompetencyFilter').value;
            const difficulty = document.getElementById('difficultyFilter').value;
            const status = document.getElementById('statusFilter').value;
            const keyword = document.getElementById('searchQuestion').value;
            
            console.log('검색 조건:', { competency, subCompetency, difficulty, status, keyword });
            alert('검색 기능이 실행되었습니다. 실제 구현 시 서버에서 데이터를 가져옵니다.');
        }

        // 문항 저장
        function saveQuestion() {
            const form = document.getElementById('addQuestionForm');
            
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }
            
            const competency = document.getElementById('competency').value;
            const subCompetency = document.getElementById('subCompetency').value;
            const questionText = document.getElementById('questionText').value;
            const questionType = document.getElementById('questionType').value;
            const difficulty = document.getElementById('difficulty').value;
            const isActive = document.getElementById('isActive').checked;
            const isRequired = document.getElementById('isRequired').checked;
            
            console.log('문항 저장:', { 
                competency, 
                subCompetency, 
                questionText, 
                questionType, 
                difficulty, 
                isActive, 
                isRequired 
            });
            
            alert('문항이 저장되었습니다.');
            
            // 모달 닫기
            const modal = bootstrap.Modal.getInstance(document.getElementById('addQuestionModal'));
            modal.hide();
            
            // 폼 초기화
            form.reset();
        }

        // 문항 수정
        function editQuestion(questionId) {
            alert(`문항 ID ${questionId} 수정 기능을 실행합니다.`);
            // 실제 구현에서는 수정 모달 열기
        }

        // 문항 삭제
        function deleteQuestion(questionId) {
            if (confirm('선택한 문항을 정말 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.')) {
                alert(`문항 ID ${questionId}이(가) 삭제되었습니다.`);
                // 실제 구현에서는 서버 API 호출
            }
        }

        // 문항 일괄 등록
        function importQuestions() {
            const fileInput = document.getElementById('importFile');
            
            if (!fileInput.files || fileInput.files.length === 0) {
                alert('파일을 선택해주세요.');
                return;
            }
            
            const file = fileInput.files[0];
            console.log('파일 업로드:', file.name);
            
            alert('파일이 업로드되었습니다. 처리 중...');
            
            // 모달 닫기
            const modal = bootstrap.Modal.getInstance(document.getElementById('importQuestionsModal'));
            modal.hide();
            
            // 실제 구현에서는 파일 업로드 및 처리 로직 추가
            setTimeout(() => {
                alert('45개 문항이 성공적으로 등록되었습니다.');
            }, 1500);
        }

        // 문항 유형에 따른 선택지 UI 변경
        document.getElementById('questionType').addEventListener('change', function() {
            const questionType = this.value;
            const optionsContainer = document.getElementById('optionsContainer');
            
            // 선택지 UI 초기화
            optionsContainer.innerHTML = '<label class="form-label">선택지 *</label>';
            
            if (questionType === 'likert5') {
                // 5점 리커트 척도 선택지
                for (let i = 1; i <= 5; i++) {
                    const optionText = i === 1 ? '전혀 그렇지 않다' : 
                                      i === 2 ? '그렇지 않다' : 
                                      i === 3 ? '보통이다' : 
                                      i === 4 ? '그렇다' : '매우 그렇다';
                    
                    const optionHtml = `
                        <div class="option-input mb-2">
                            <div class="input-group">
                                <span class="input-group-text">${i}</span>
                                <input type="text" class="form-control" placeholder="${optionText}" value="${optionText}" required>
                                <span class="input-group-text">점수</span>
                                <input type="number" class="form-control" value="${i}" min="0" max="5" required style="width: 70px;">
                            </div>
                        </div>
                    `;
                    
                    optionsContainer.innerHTML += optionHtml;
                }
            } else if (questionType === 'likert7') {
                // 7점 리커트 척도 선택지
                for (let i = 1; i <= 7; i++) {
                    const optionText = i === 1 ? '전혀 그렇지 않다' : 
                                      i === 2 ? '그렇지 않다' : 
                                      i === 3 ? '약간 그렇지 않다' : 
                                      i === 4 ? '보통이다' : 
                                      i === 5 ? '약간 그렇다' : 
                                      i === 6 ? '그렇다' : '매우 그렇다';
                    
                    const optionHtml = `
                        <div class="option-input mb-2">
                            <div class="input-group">
                                <span class="input-group-text">${i}</span>
                                <input type="text" class="form-control" placeholder="${optionText}" value="${optionText}" required>
                                <span class="input-group-text">점수</span>
                                <input type="number" class="form-control" value="${i}" min="0" max="7" required style="width: 70px;">
                            </div>
                        </div>
                    `;
                    
                    optionsContainer.innerHTML += optionHtml;
                }
            } else if (questionType === 'multiple' || questionType === 'checkbox') {
                // 객관식 선택지
                for (let i = 1; i <= 4; i++) {
                    const optionHtml = `
                        <div class="option-input mb-2">
                            <div class="input-group">
                                <span class="input-group-text">${i}</span>
                                <input type="text" class="form-control" placeholder="선택지 ${i}" required>
                                <span class="input-group-text">점수</span>
                                <input type="number" class="form-control" value="${i}" min="0" max="10" required style="width: 70px;">
                                ${questionType === 'multiple' ? 
                                    `<div class="input-group-text">
                                        <input class="form-check-input" type="radio" name="correctOption" value="${i}">
                                        <span class="ms-2">정답</span>
                                    </div>` : 
                                    `<div class="input-group-text">
                                        <input class="form-check-input" type="checkbox" name="correctOption" value="${i}">
                                        <span class="ms-2">정답</span>
                                    </div>`
                                }
                            </div>
                        </div>
                    `;
                    
                    optionsContainer.innerHTML += optionHtml;
                }
                
                // 선택지 추가 버튼
                optionsContainer.innerHTML += `
                    <button type="button" class="btn btn-sm btn-outline-secondary" onclick="addOption()">
                        <i class="fas fa-plus me-1"></i>
                        선택지 추가
                    </button>
                `;
            }
        });

        // 선택지 추가
        function addOption() {
            const optionsContainer = document.getElementById('optionsContainer');
            const optionInputs = optionsContainer.querySelectorAll('.option-input');
            const newIndex = optionInputs.length + 1;
            const questionType = document.getElementById('questionType').value;
            
            const optionHtml = `
                <div class="option-input mb-2">
                    <div class="input-group">
                        <span class="input-group-text">${newIndex}</span>
                        <input type="text" class="form-control" placeholder="선택지 ${newIndex}" required>
                        <span class="input-group-text">점수</span>
                        <input type="number" class="form-control" value="${newIndex}" min="0" max="10" required style="width: 70px;">
                        ${questionType === 'multiple' ? 
                            `<div class="input-group-text">
                                <input class="form-check-input" type="radio" name="correctOption" value="${newIndex}">
                                <span class="ms-2">정답</span>
                            </div>` : 
                            `<div class="input-group-text">
                                <input class="form-check-input" type="checkbox" name="correctOption" value="${newIndex}">
                                <span class="ms-2">정답</span>
                            </div>`
                        }
                    </div>
                </div>
            `;
            
            // 추가 버튼 앞에 새 선택지 삽입
            const addButton = optionsContainer.querySelector('button');
            addButton.insertAdjacentHTML('beforebegin', optionHtml);
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('진단 문항 관리 페이지가 로드되었습니다.');
        });
    </script>
</body>
</html>
